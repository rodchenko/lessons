# Деплой приложения

После того, как приложение или страница готовы, их можно разместить в сети.

Чтобы любой пользователь мог обратиться к вашему сайту (серверу, на котором работает наша программа) у этого сервера должен быть постоянный и глобальный адрес. Доменное имя, (например example.com) это только указатель на IP-адрес сервера. Домашние и рабочие сети чаще всего не имеют постоянных адресов, из-за их дифицита. Даже если ваша сеть имеет статичный IP адрес, то ваш компьютер, подключенный к ней, находится за NAT (Network address translation) – это значит, что глобальный адрес всего один на всю сеть и он присваевается входной точке вашей сети (роутеру), и следовательно ваш компьютер имеет только локальный адрес (например 192.168.1.2). Поэтому компьютеры, подключенные к глобальной сети не могут напрямую подключится к вашему компьютеру или серверу установленному у вас дома.

Существует несколько способов как разместить программу в глобальной сети (получить глобальный/публичный IP-адрес):

1. Статичную страницу (без кода, который выполняется на сервере) можно разместить на __хостинге статичных файлов__ (static files hosting). Например: [github pages](https://pages.github.com/), список сервисов: [cheap or free static website hosting](http://alignedleft.com/resources/cheap-web-hosting).
2. Код выполняемый на сервере, код чат-бота или динамически формируемую страницу можно разместить используя __сервер__ (dedicated server) или __виртуальный сервер__ (VPS). В этом случае, вы чаще всего платите за аренду физической или виртуальной машины, на которой можете делать все что угодно: устанавливать программы которые вам нужны и выполнять любой код. Пример популярного сервиса для аренды VPS-серверов: [digitalocean](http://digitalocean.com).
3. Для того, чтобы код вашей программы выполнялся на вашем компьютере, но был доступен в интернете, можно использовать технологию, называемую __обратный туннель__. Это может быть специальный сервис или ваш собственный виртуальный сервер, работающий в качестве 'прокси'. Этот сервер, имеющий глобальный IP может отправлять запросы к вашему компьютеру, используя _обратный туннель_ – безопасное соединение с вашим компьютером, инициированное вашим компьютером. Пример сервиса: [ngrok.com](https://ngrok.com/download).


### 3. Обратный туннель

Третий вариант, наименее распростанненный, но наиболее подходящий для художественных проектов с небольшим количеством пользователей. Чтобы воспользоваться сервисом необходимо:

1. Загрузить программу [ngrok](https://ngrok.com/download)
2. Разархивировать загруженный файл
3. Запустить программу из терминала указав путь к только что разархивированному файлу, например: `~/Downloads/ngrok http 8000` (данной командой мы запускаем туннель на 8000 порт)
4. В командной строке у вас должен отобразиться адрес домена, по которому теперь доступен ваш 8000 порт. Например:
    ```
    Forwarding  https://9c36621d.ngrok.io -> localhost:8000
    ```

Теперь любой подключившийся по этому адресу увидит вашу программу запущенную на этом порту. Чтобы проверить это, мы можем сделать кнопку, которая будет выполнять какую-то функцию на нашем компьютере, например произносить фразу:

```javascript
var express = require('express')
var say = require('say')

var app = express()
app.listen(8000)

app.get('/', function (request, response) {
  // логируем заголовки соединения
  console.log('headers', request.headers)

  // отправляем пользователю текст hello
  response.send('hello')

  // произносим 'New user connected' из колонок нашего компьютера
  say.speak('New user connected')
})
```

Полноценный пример приложения для тестирования обратного туннеля, который произносит введенную пользователем фразу: [example-say-input](../lesson-04/example-say-input).
